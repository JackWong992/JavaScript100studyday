# 2-浅聊JS的运行机制(堆栈内存和不同数据类型操作方式)

```javascript
var a = 12;
var b = a;

b = 13;

console.log(a)  //13

console.log('------')
var obj1 = {
  n:100
}
var obj2 = obj1
obj2['n'] = 200;
console.log(obj1.n) //200
```

## 浅分析JavaScript运行机制

1. 当浏览器(内核)渲染和解析JavaScript的时候，会提供一个供JavaScript代码运行的环境，我们称这个环境为『全局作用域』(global/window scope)
2. 代码自上而下执行，在之前会有一个变量提升的阶段.
> 基础数据类型的值会存储在当前作用域下

`var a = 12`
1. 首先开辟一个空间存储12
2. 在当前作用域中声明一个变量a(var a)
3. 让声明的变量和存储的12进行关联,这个赋值的操作叫做定义。

### 基本数据类型
基本数据类型(也叫做值类型)，是按照值来操作的：把原来的值复制一份放到新的空间或者位置上，和原来的值没有关系.

### 引用数据类型
引用数据类型(也叫做按地址操作)的值不能直接存储到当前作用域下(因为可能存储的内容过于复杂)，我们需要先开辟一个新的空间，把内容存储到仓库中.

`var obj1 = {n:100}`
1. 首先开辟一个新的内存空间，把对象中的键值对依次存储进来(为了保证后面可以找到这个空间，此空间有一个16进制的地址)
2. 声明一个变量
3. 让变量和空间地址关联在一起(把空间地址赋值给变量)

引用类型不是按照值操作的，它操作的是空间的引用地址：把原来空间的地址赋值给新的变量,但原来的空间没有被克隆，还是一个空间，这样会出现多个变量关联的是相同的空间，相互之间就会存在影响.

分析:
![1041558534611_.pic.jpg](https://i.loli.net/2019/05/22/5ce559f21513661751.jpg)

对于简单变量存储的地方是栈内存,栈内存就是一个供JS代码执行的环境，所有的基本类型值都会直接在栈内存中开辟一个新的位置进行存储.


对于复杂变量来说存储的地方是堆内存，堆内存用来存储引用类型中的信息值得，对象存储的键值对，函数存储的是代码字符串.